(this.webpackJsonpnutrition_react=this.webpackJsonpnutrition_react||[]).push([[0],{102:function(e,t,a){e.exports=a(140)},107:function(e,t,a){},117:function(e,t){},118:function(e,t){},140:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),o=a.n(i),l=(a(107),a(108),a(57),a(15)),c=(a(67),a(196)),u=a(199),s=a(91),m=a(180),d=a(55),p=a(176),f=a(179);function h(e){var t=e.file_name,a=g();return r.a.createElement(p.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(d.a,{variant:"h6",className:a.title},t)))}var g=Object(m.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,textAlign:"left"}}}));function b(e){var t=e.file_name,a=_();return r.a.createElement(u.a,{component:"span",className:a.boxParentSize},r.a.createElement(s.a,{className:a.root},r.a.createElement("h1",null,"Nutrition Application")),r.a.createElement(h,{file_name:t}))}var _=Object(m.a)({root:{background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:100},boxParentSize:{height:100,width:"80%",padding:"0 30px"}}),v=a(37),E=a(44),x=a.n(E),O=a(61),j=a(181),S=a(54);function y(e){var t=e.stateMutator,a=e.spreadSheetMutator,n=e.spreadSheetCompoMutator,i=e.setAlimentPortionMutator,o=e.setLoadingMutator,l=e.setFileName,c=e.setAlimentOptions,u=w(),s=function(){var e=Object(O.a)(x.a.mark((function e(a){var n,r,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),n=a.target.files,r=n[0],(i=new FileReader).onload=function(){var e=Object(O.a)(x.a.mark((function e(a){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target.result,r=S.read(n,{type:"binary"}),e.next=4,m(r);case 4:return e.next=6,d(r);case 6:return e.next=8,t(!0);case 8:return e.next=10,o(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l(r.name),e.next=7,i.readAsBinaryString(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){var t=e.SheetNames[0],n=e.Sheets[t],r=S.utils.sheet_to_json(n,{header:1}),o={},l=0;o.aliments=[],r.forEach((function(e){1!==++l&&null!=e[0]&&0!==e.length&&o.aliments.push({aliment:e[2],sous_groupe_alimentaire:e[1],groupe_alimentaire:e[0],portion:e[3]})})),a(o);var c={};o.aliments.forEach((function(e){c[e.aliment]=e.portion})),i(c)},d=function(e){var t=e.SheetNames[1],a=e.Sheets[t],r=S.utils.sheet_to_json(a,{header:1}),i=p(r);n(i);var o={};r.map((function(e,t){0!=t&&(o.hasOwnProperty(e[0])||(o[e[0]]=[]),o[e[0]].push(e[2]))})),c(o)},p=function(e){var t={aliments_data_nutrient_ref:[],nutrient_headers:[]};return e.forEach((function(e,a){0!==a?t.aliments_data_nutrient_ref.push(Object(v.a)({},e[2],{alim_nom_fr:e[2],alim_grp_nom_fr:e[0],alim_ssgrp_nom_fr:e[1],les_nutrients:[{id:++a,nutrient:t.nutrient_headers[0],value:e[3].toString().replace(",",".")},{id:++a,nutrient:t.nutrient_headers[1],value:e[4].toString().replace(",",".")},{id:++a,nutrient:t.nutrient_headers[2],value:e[5].toString().replace(",",".")},{id:++a,nutrient:t.nutrient_headers[3],value:e[6].toString().replace(",",".")},{id:++a,nutrient:t.nutrient_headers[4],value:e[7].toString().replace(",",".")},{id:++a,nutrient:t.nutrient_headers[5],value:e[8].toString().replace(",",".")},{id:++a,nutrient:t.nutrient_headers[6],value:e[9].toString().replace(",",".")},{id:++a,nutrient:t.nutrient_headers[7],value:e[10].toString().replace(",",".")},{id:++a,nutrient:t.nutrient_headers[1]+" "+t.nutrient_headers[3],value:parseFloat(e[4].toString().replace(",","."))+parseFloat(e[6].toString().replace(",","."))}]})):t.nutrient_headers=f(e)})),t},f=function(e){return e.push("Eau + Alcool (g/100g)"),e.slice(3)};return r.a.createElement("div",{className:u.root},r.a.createElement("input",{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",className:u.input,id:"contained-button-file",type:"file",onChange:s}),r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(j.a,{size:"large",variant:"contained",color:"primary",component:"span"},"Upload Nutrition Spreadsheet")))}var w=Object(m.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"}}})),C=a(197),N=a(182),k=a(186),A=a(45),F=a(53),D=a(183),I=a(201),L=a(184),M=a(185),B=a(187),P=a(198),T=a(189),R=a(190),z=a(191),G=a(192),W=a(193),U=a(194),H=a(200),J=a(82),$=a.n(J);function q(e){var t=e.id,a=e.aliment,i=e.sous_groupe,o=e.groupe_alimentaire,c=e.portion,u=e.spreadsheetData,m=e.setSpreadsheetData,p=e.nutrientCompo,f=e.setAlimentPortion,h=e.aliment_portion,g=e.aliment_options,b=V(),_=Object(n.useState)(!1),E=Object(l.a)(_,2),x=E[0],O=E[1],j=Object(n.useState)(""),S=Object(l.a)(j,2),y=S[0],w=S[1],C=Object(n.useState)(c),F=Object(l.a)(C,2),J=F[0],q=F[1],K=Object(n.useState)(""),Q=Object(l.a)(K,2),X=Q[0],Y=Q[1];return Object(n.useEffect)((function(){var e=p.aliments_data_nutrient_ref[p.aliments_data_nutrient_ref.findIndex((function(e){return a===Object.keys(e)[0]}))][a].alim_grp_nom_fr;Y(e),$()({method:"get",url:"https://api.allorigins.win/get?url=".concat(encodeURIComponent("https://yandex.com/images/search?text="+a+"&isize=medium"))}).then((function(e){var t=e.data.contents,a=t.indexOf('"freshness":"normal","preview"'),n=t.indexOf("https",a),r=t.indexOf("fileSizeInBytes",n),i=t.substring(n,r-3);w(i),O(!0)})).catch((function(e){console.warn(e)}))}),[a,g]),r.a.createElement(N.a,{className:b.card},r.a.createElement(D.a,{avatar:r.a.createElement(I.a,{"aria-label":"recipe",className:b.avatar},null!=a?a[0]:""),title:r.a.createElement(d.a,{variant:"h5",color:"primary",component:"p"},a),subheader:"Sous-Groupe Alimentaire ".concat(i)}),x?r.a.createElement(L.a,{className:b.media,image:y,title:a}):r.a.createElement(M.a,null),r.a.createElement(k.a,null,r.a.createElement(d.a,{variant:"subtitle1",color:"primary",component:"p"},"Groupe Alimentaire: ",o)),r.a.createElement(B.a,{disableSpacing:!0}),r.a.createElement(k.a,null,r.a.createElement(d.a,{paragraph:!0},"Les Aliments"),r.a.createElement(P.a,{required:!0,InputLabelProps:{shrink:!0},type:"number",min:0,id:a,label:"PORTION",variant:"filled",value:J,onChange:function(e){""!==e.target.value?(q(Number.parseFloat(e.target.value)),f(Object(A.a)(Object(A.a)({},h),{},Object(v.a)({},a,Number.parseFloat(e.target.value)))),Number.parseFloat(e.target.value)<0&&q(0)):q(e.target.value)}}),r.a.createElement(H.a,{onChange:function(e,a){return function(e){var a=p.aliments_data_nutrient_ref[p.aliments_data_nutrient_ref.findIndex((function(t){return e===Object.keys(t)[0]}))][e].alim_grp_nom_fr,n=p.aliments_data_nutrient_ref[p.aliments_data_nutrient_ref.findIndex((function(t){return e===Object.keys(t)[0]}))][e].alim_ssgrp_nom_fr;u.aliments.splice(t,1,{aliment:e,sous_groupe_alimentaire:n,groupe_alimentaire:a,portion:J}),O(!1),m(Object(A.a)(Object(A.a)({},u),{},{aliments:u.aliments}))}(a)},options:g[X]||[],getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(P.a,Object.assign({},e,{label:"Change Aliment",margin:"normal"}))}}),r.a.createElement(T.a,{component:s.a,style:{display:"none"}},r.a.createElement(R.a,{className:b.table,"aria-label":"simple table"},r.a.createElement(z.a,null,r.a.createElement(G.a,null,r.a.createElement(W.a,null,r.a.createElement("strong",null,"Le Nutriment")),r.a.createElement(W.a,{align:"right"},r.a.createElement("strong",null,"Value")))),r.a.createElement(U.a,null,p.aliments_data_nutrient_ref[p.aliments_data_nutrient_ref.findIndex((function(e){return a===Object.keys(e)[0]}))][a].les_nutrients.map((function(e){return r.a.createElement(G.a,{key:e.id},r.a.createElement(W.a,{component:"th",scope:"row"},e.nutrient),r.a.createElement(W.a,{align:"right"},(Number.parseFloat(e.value)*Number.parseFloat(J)).toFixed(2)))})))))))}var V=Object(m.a)((function(e){return{card:{width:window.innerWidth-30,margin:1,marginTop:10,marginBottom:50},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:F.a[500]},table:{width:250}}})),K=a(5),Q=a(203),X=a(202),Y=a(195),Z=a(84),ee=a.n(Z);function te(e){var t=e.aliment_portion,a=e.nutrientCompo,n=Object(K.a)((function(e){return{root:{height:8},disabled:{color:e.palette.primary.main},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}}}))(Q.a),i=ae(),o=[{icon:"done",backgroundColor:"#70AB1A",textColor:"white"},{icon:"error_outline",backgroundColor:"#D8AD26",textColor:"white"},{icon:"close",backgroundColor:"#D14600",textColor:"white"},{icon:"",backgroundColor:"#ffffff",textColor:"black"}],l=[{color:"#72DC00"},{color:"#D29D23"},{color:"#A93226"}],c=[{mid:2250,high:3e3},{mid:0,high:0},{mid:69,high:92},{mid:0,high:0},{mid:600,high:800},{mid:1875,high:2500},{mid:1500,high:2e3},{mid:0,high:0},{mid:0,high:1200}];return r.a.createElement("div",{className:i.root},a.nutrient_headers.map((function(e,u){var s,m=0;if(e){var p=Object.keys(t).reduce((function(e,n){var r=a.aliments_data_nutrient_ref[a.aliments_data_nutrient_ref.findIndex((function(e){return n===Object.keys(e)[0]}))][n].les_nutrients[u].value;return e+t[n]*Number.parseFloat(r)}),0);m=p>=c[u].high?2:p>c[u].mid?1:0,0===c[u].high&&(m=3);var f=(p/c[u].high*100).toFixed(0);return s=f>=75?2:f>=50?1:0,r.a.createElement("div",{key:u,style:{marginBottom:20,width:"95%",paddingTop:10}},"Eau (g/100g)"!=e&&"Alcool (g/100g)"!=e&&"Glucides (g/100g)"!=e?r.a.createElement("div",null,r.a.createElement(n,{valueLabelFormat:function(e){return e+"%"},"aria-label":"pretto slider",value:f,valueLabelDisplay:"on",step:1,style:{color:l[s].color}}),r.a.createElement(d.a,{gutterBottom:!0},e,": ",r.a.createElement("b",null,p.toFixed(2)," "))):r.a.createElement(X.a,{key:u,style:{margin:"0.5%",backgroundColor:o[m].backgroundColor,color:o[m].textColor},icon:r.a.createElement(ee.a,{style:{color:o[m].textColor}}),variant:"outlined",label:r.a.createElement(d.a,{className:i.nutrientText},e,": ",r.a.createElement("b",null,p.toFixed(2)," ")),onDelete:function(e){},deleteIcon:r.a.createElement(Y.a,null,o[m].icon)}))}})))}var ae=Object(m.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5),margin:5},title:{fontSize:24,justifyContent:"center"},nutrientText:{fontSize:12},chipColor:{borderColor:"green"}}})),ne=a(90);function re(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)("No File Uploaded"),m=Object(l.a)(o,2),p=m[0],f=m[1],h=Object(n.useState)({}),g=Object(l.a)(h,2),_=g[0],v=g[1],E=Object(n.useState)({}),x=Object(l.a)(E,2),O=x[0],j=x[1],S=Object(n.useState)({}),w=Object(l.a)(S,2),A=w[0],F=w[1],D=Object(n.useState)(!1),I=Object(l.a)(D,2),L=I[0],M=I[1],B=Object(n.useState)([]),P=Object(l.a)(B,2),T=P[0],R=P[1],z=ie();return Object(n.useEffect)((function(){if("undefined"!=typeof O.aliments){var e={};O.aliments.forEach((function(t){e[t.aliment]=t.portion})),v(e)}}),[O,T]),r.a.createElement(c.a,null,r.a.createElement(b,{file_name:p}),!a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y,{stateMutator:i,spreadSheetMutator:j,spreadSheetCompoMutator:F,setAlimentPortionMutator:v,setLoadingMutator:M,setFileName:f,setAlimentOptions:R}),r.a.createElement("div",{style:{marginTop:20}},r.a.createElement("a",{href:"PHASE 2_D\xe9mo -12 sep.xlsx"},"Download Sample Spreadsheet Here"))),L&&r.a.createElement(C.a,{style:{marginTop:10}}),a&&r.a.createElement(s.a,{elevation:3,className:z.root},r.a.createElement(N.a,{className:z.summary_root},r.a.createElement(k.a,null,r.a.createElement(d.a,{className:z.title},"Summaries"),r.a.createElement(te,{aliment_portion:_,nutrientCompo:A}))),r.a.createElement(ne.a,{itemsToShow:1},O.aliments.map((function(e,t){return r.a.createElement(q,{id:t,key:t,aliment:null!=e?e.aliment:"",sous_groupe:null!=e?e.sous_groupe_alimentaire:"",groupe_alimentaire:null!=e?e.groupe_alimentaire:"",portion:null!=e?e.portion:"",spreadsheetData:O,setSpreadsheetData:j,nutrientCompo:A,setAlimentPortion:v,aliment_portion:_,aliment_options:T})}))),r.a.createElement(u.a,{component:"span",m:1})))}var ie=Object(m.a)({root:{background:"linear-gradient(45deg, rgba(255,255,255,0.9) 30%, #rgba(225,225,255,0.4) 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(10, 10, 0, .1)",color:"white"},food_card:{flexGrow:1},summary_root:{width:"100%",flex:1},myCardRow:{flexDirection:"row"},myCardColumn:{flexDirection:"column"},title:{fontSize:24,justifyContent:"center"}});var oe=function(){return r.a.createElement(re,null)};var le=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(oe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,a){},67:function(e,t,a){},69:function(e,t){}},[[102,1,2]]]);
//# sourceMappingURL=main.ee498f2e.chunk.js.map